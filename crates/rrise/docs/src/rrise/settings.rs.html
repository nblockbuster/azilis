<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `src\settings.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>settings.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-eabf764633b9d7be.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-777f3e9583f8c92d.css"><link rel="stylesheet" disabled href="../../static.files/dark-e2f4109f2e82e3af.css"><link rel="stylesheet" disabled href="../../static.files/ayu-c360e709a65bed99.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/source-script-74087aa2e88f4475.js"></script><script defer src="../../source-files.js"></script><script defer src="../../static.files/main-c2d2a5dbaed13e6b.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"></nav><main><div class="width-limiter"><nav class="sub"><a class="sub-logo-container" href="../../rrise/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="example-wrap"><pre class="src-line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
<span id="212">212</span>
<span id="213">213</span>
<span id="214">214</span>
<span id="215">215</span>
<span id="216">216</span>
<span id="217">217</span>
<span id="218">218</span>
<span id="219">219</span>
<span id="220">220</span>
<span id="221">221</span>
<span id="222">222</span>
<span id="223">223</span>
<span id="224">224</span>
<span id="225">225</span>
<span id="226">226</span>
<span id="227">227</span>
<span id="228">228</span>
<span id="229">229</span>
<span id="230">230</span>
<span id="231">231</span>
<span id="232">232</span>
<span id="233">233</span>
<span id="234">234</span>
<span id="235">235</span>
<span id="236">236</span>
<span id="237">237</span>
<span id="238">238</span>
<span id="239">239</span>
<span id="240">240</span>
<span id="241">241</span>
<span id="242">242</span>
<span id="243">243</span>
<span id="244">244</span>
<span id="245">245</span>
<span id="246">246</span>
<span id="247">247</span>
<span id="248">248</span>
<span id="249">249</span>
<span id="250">250</span>
<span id="251">251</span>
<span id="252">252</span>
<span id="253">253</span>
<span id="254">254</span>
<span id="255">255</span>
<span id="256">256</span>
<span id="257">257</span>
<span id="258">258</span>
<span id="259">259</span>
<span id="260">260</span>
<span id="261">261</span>
<span id="262">262</span>
<span id="263">263</span>
<span id="264">264</span>
<span id="265">265</span>
<span id="266">266</span>
<span id="267">267</span>
<span id="268">268</span>
<span id="269">269</span>
<span id="270">270</span>
<span id="271">271</span>
<span id="272">272</span>
<span id="273">273</span>
<span id="274">274</span>
<span id="275">275</span>
<span id="276">276</span>
<span id="277">277</span>
<span id="278">278</span>
<span id="279">279</span>
<span id="280">280</span>
<span id="281">281</span>
<span id="282">282</span>
<span id="283">283</span>
<span id="284">284</span>
<span id="285">285</span>
<span id="286">286</span>
<span id="287">287</span>
<span id="288">288</span>
<span id="289">289</span>
<span id="290">290</span>
<span id="291">291</span>
<span id="292">292</span>
<span id="293">293</span>
<span id="294">294</span>
<span id="295">295</span>
<span id="296">296</span>
<span id="297">297</span>
<span id="298">298</span>
<span id="299">299</span>
<span id="300">300</span>
<span id="301">301</span>
<span id="302">302</span>
<span id="303">303</span>
<span id="304">304</span>
<span id="305">305</span>
<span id="306">306</span>
<span id="307">307</span>
<span id="308">308</span>
<span id="309">309</span>
<span id="310">310</span>
<span id="311">311</span>
<span id="312">312</span>
<span id="313">313</span>
<span id="314">314</span>
<span id="315">315</span>
<span id="316">316</span>
<span id="317">317</span>
<span id="318">318</span>
<span id="319">319</span>
<span id="320">320</span>
<span id="321">321</span>
<span id="322">322</span>
<span id="323">323</span>
<span id="324">324</span>
<span id="325">325</span>
<span id="326">326</span>
<span id="327">327</span>
<span id="328">328</span>
<span id="329">329</span>
<span id="330">330</span>
<span id="331">331</span>
<span id="332">332</span>
<span id="333">333</span>
<span id="334">334</span>
<span id="335">335</span>
<span id="336">336</span>
<span id="337">337</span>
<span id="338">338</span>
<span id="339">339</span>
<span id="340">340</span>
<span id="341">341</span>
<span id="342">342</span>
<span id="343">343</span>
<span id="344">344</span>
<span id="345">345</span>
<span id="346">346</span>
<span id="347">347</span>
<span id="348">348</span>
<span id="349">349</span>
<span id="350">350</span>
<span id="351">351</span>
<span id="352">352</span>
<span id="353">353</span>
<span id="354">354</span>
<span id="355">355</span>
<span id="356">356</span>
<span id="357">357</span>
<span id="358">358</span>
<span id="359">359</span>
<span id="360">360</span>
<span id="361">361</span>
<span id="362">362</span>
<span id="363">363</span>
<span id="364">364</span>
<span id="365">365</span>
<span id="366">366</span>
<span id="367">367</span>
<span id="368">368</span>
<span id="369">369</span>
<span id="370">370</span>
<span id="371">371</span>
<span id="372">372</span>
<span id="373">373</span>
<span id="374">374</span>
<span id="375">375</span>
<span id="376">376</span>
<span id="377">377</span>
<span id="378">378</span>
<span id="379">379</span>
<span id="380">380</span>
<span id="381">381</span>
<span id="382">382</span>
<span id="383">383</span>
<span id="384">384</span>
<span id="385">385</span>
<span id="386">386</span>
<span id="387">387</span>
<span id="388">388</span>
<span id="389">389</span>
<span id="390">390</span>
<span id="391">391</span>
<span id="392">392</span>
<span id="393">393</span>
<span id="394">394</span>
<span id="395">395</span>
<span id="396">396</span>
<span id="397">397</span>
<span id="398">398</span>
<span id="399">399</span>
<span id="400">400</span>
<span id="401">401</span>
<span id="402">402</span>
<span id="403">403</span>
<span id="404">404</span>
<span id="405">405</span>
<span id="406">406</span>
<span id="407">407</span>
<span id="408">408</span>
<span id="409">409</span>
<span id="410">410</span>
<span id="411">411</span>
<span id="412">412</span>
<span id="413">413</span>
<span id="414">414</span>
<span id="415">415</span>
<span id="416">416</span>
<span id="417">417</span>
<span id="418">418</span>
<span id="419">419</span>
<span id="420">420</span>
<span id="421">421</span>
<span id="422">422</span>
<span id="423">423</span>
<span id="424">424</span>
<span id="425">425</span>
<span id="426">426</span>
<span id="427">427</span>
<span id="428">428</span>
<span id="429">429</span>
<span id="430">430</span>
<span id="431">431</span>
<span id="432">432</span>
<span id="433">433</span>
<span id="434">434</span>
<span id="435">435</span>
<span id="436">436</span>
<span id="437">437</span>
</pre><pre class="rust"><code><span class="comment">/*
 * Copyright (c) 2022 Contributors to the Rrise project
 */

</span><span class="attr">#[cfg(not(wwrelease))]
</span><span class="kw">pub use </span><span class="kw">crate</span>::bindings::root::AkCommSettings;
<span class="attr">#[cfg(not(wwrelease))]
</span><span class="kw">use </span><span class="kw">crate</span>::bindings::root::AK::Comm;
<span class="kw">use </span><span class="kw">crate</span>::bindings::root::AK::{MemoryMgr, MusicEngine, SoundEngine, StreamMgr};
<span class="kw">pub use </span><span class="kw">crate</span>::bindings::root::{AkMemSettings, AkMusicSettings, AkStreamMgrSettings};
<span class="kw">use </span><span class="kw">crate</span>::to_os_char;
<span class="kw">use </span><span class="kw">crate</span>::OsChar;
<span class="kw">use </span>log::error;
<span class="kw">use </span>std::sync::atomic::{AtomicPtr, Ordering};

<span class="kw">impl </span>Default <span class="kw">for </span>AkMemSettings {
    <span class="doccomment">/// Obtain the default initialization settings for the default implementation of the Memory Manager.
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: AkMemSettings = std::mem::zeroed();
            MemoryMgr::GetDefaultSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        }
    }
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkMusicSettings {
    <span class="doccomment">/// Get the default values of the initialization settings of the music engine.
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: AkMusicSettings = std::mem::zeroed();
            MusicEngine::GetDefaultInitSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        }
    }
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkStreamMgrSettings {
    <span class="doccomment">/// Get the default values for the Stream Manager&#39;s settings.
    ///
    /// *See also*
    /// &gt; - [stream_mgr::init](crate::stream_mgr::init)
    /// &gt; - [stream_mgr::init_default_stream_mgr](crate::stream_mgr::init_default_stream_mgr)
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: AkStreamMgrSettings = std::mem::zeroed();
            StreamMgr::GetDefaultSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        }
    }
}

<span class="attr">#[cfg(not(wwrelease))]
</span><span class="kw">impl </span>Default <span class="kw">for </span>AkCommSettings {
    <span class="doccomment">/// Gets the communication module&#39;s default initialization settings values.
    ///
    /// *See also*
    /// &gt; - [communication::init](crate::communication::init)
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: AkCommSettings = std::mem::zeroed();
            Comm::GetDefaultInitSettings(<span class="kw-2">&amp;mut </span>ss);
            <span class="kw">if let </span><span class="prelude-val">Some</span>(app_name) = app_name() {
                ss.szAppNetworkName = app_name;
            }
            ss
        }
    }
}

<span class="attr">#[cfg(not(wwrelease))]
</span><span class="kw">unsafe fn </span>app_name() -&gt; <span class="prelude-ty">Option</span>&lt;[i8; <span class="number">64</span>]&gt; {
    <span class="kw">if let </span><span class="prelude-val">Some</span>(<span class="kw-2">mut </span>name) = std::env::current_exe()
        .ok()<span class="question-mark">?
        </span>.file_name()<span class="question-mark">?
        </span>.to_str()<span class="question-mark">?
        </span>.to_owned()
        .into()
    {
        <span class="kw">if </span>name.ends_with(<span class="string">&quot;.exe&quot;</span>) {
            name.truncate(name.len() - <span class="number">4</span>);
        }

        <span class="kw">if </span>name.len() &lt; <span class="number">64 </span>{
            name.extend(std::iter::repeat(<span class="string">&#39;\0&#39;</span>).take(<span class="number">64 </span>- name.len()));
        } <span class="kw">else </span>{
            name.truncate(<span class="number">64</span>);
        }

        <span class="kw">let </span><span class="kw-2">mut </span>truncated = [<span class="number">0_u8</span>; <span class="number">64</span>];
        truncated.copy_from_slice(name.as_bytes());
        truncated[<span class="number">63</span>] = <span class="number">0</span>;

        <span class="prelude-val">Some</span>(std::mem::transmute(truncated))
    } <span class="kw">else </span>{
        <span class="prelude-val">None
    </span>}
}

<span class="kw">pub struct </span>AkInitSettingsPrivate {
    <span class="attr">#[doc = <span class="string">&quot;When using DLLs for plugins, specify their path. Leave NULL if DLLs are in the same folder as the game executable.&quot;</span>]
    </span>plugin_dll_path: Vec&lt;OsChar&gt;,
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkInitSettingsPrivate {
    <span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="self">Self </span>{
            plugin_dll_path: <span class="macro">vec!</span>[<span class="number">0</span>],
        }
    }
}

<span class="doccomment">/// Platform-independent initialization settings of the sound engine
/// See also
/// &gt; - [sound_engine::init](crate::sound_engine::init)
/// &gt; - [AkPlatformInitSettings::default]
</span><span class="kw">pub struct </span>AkInitSettings {
    <span class="kw">pub </span>install_assert_hook: bool,
    <span class="attr">#[doc = <span class="string">&quot;Maximum number of paths for positioning&quot;</span>]
    </span><span class="kw">pub </span>max_num_paths: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Size of the command queue, in bytes&quot;</span>]
    </span><span class="kw">pub </span>command_queue_size: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Sets to true to enable AK::SoundEngine::PrepareGameSync usage.&quot;</span>]
    </span><span class="kw">pub </span>enable_game_sync_preparation: bool,
    <span class="attr">#[doc = <span class="string">&quot;Number of quanta ahead when continuous containers should instantiate a new voice before which next sounds should start playing. This look-ahead time allows I/O to occur, and is especially useful to reduce the latency of continuous containers with trigger rate or sample-accurate transitions.&quot;</span>]
    #[doc = <span class="string">&quot;Default is 1 audio quantum, also known as an audio frame. Its size is equal to AkInitSettings::num_samples_per_frame / AkPlatformInitSettings::sample_rate. For many platforms the default values - which can be overridden - are respectively 1,024 samples and 48 kHz. This gives a default 21.3 ms for an audio quantum, which is adequate if you have a RAM-based streaming device that completes transfers within 20 ms. With 1 look-ahead quantum, voices spawned by continuous containers are more likely to be ready when they are required to play, thereby improving the overall precision of sound scheduling. If your device completes transfers in 30 ms instead, you might consider increasing this value to 2 because it will grant new voices 2 audio quanta (~43 ms) to fetch data.&quot;</span>]
    </span><span class="kw">pub </span>continuous_playback_look_ahead: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Number of samples per audio frame (256, 512, 1024, or 2048).&quot;</span>]
    </span><span class="kw">pub </span>num_samples_per_frame: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Size of the monitoring queue, in bytes. This parameter is not used in Release build.&quot;</span>]
    </span><span class="kw">pub </span>monitor_queue_pool_size: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Main output device settings.&quot;</span>]
    </span><span class="kw">pub </span>settings_main_output: <span class="kw">crate</span>::bindings::root::AkOutputSettings,
    <span class="attr">#[doc = <span class="string">&quot;Amount of time to wait for HW devices to trigger an audio interrupt. If there is no interrupt after that time, the sound engine will revert to  silent mode and continue operating until the HW finally comes back. Default value: 2000 (2 seconds)&quot;</span>]
    </span><span class="kw">pub </span>max_hardware_timeout_ms: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Use a separate thread for loading sound banks. Allows asynchronous operations.&quot;</span>]
    </span><span class="kw">pub </span>use_sound_bank_mgr_thread: bool,
    <span class="attr">#[doc = <span class="string">&quot;Use a separate thread for processing audio. If set to false, audio processing will occur in RenderAudio(). \\ref goingfurther_eventmgrthread&quot;</span>]
    </span><span class="kw">pub </span>use_lengine_thread: bool,
    <span class="attr">#[doc = <span class="string">&quot;Application-defined audio source change event callback function.&quot;</span>]
    </span><span class="kw">pub </span>bgm_callback: <span class="kw">crate</span>::bindings::root::AkBackgroundMusicChangeCallbackFunc,
    <span class="attr">#[doc = <span class="string">&quot;Application-defined user data for the audio source change event callback function.&quot;</span>]
    </span><span class="kw">pub </span>bgm_callback_cookie: AtomicPtr&lt;std::os::raw::c_void&gt;,
    <span class="attr">#[doc = <span class="string">&quot;Floor plane axis for 3D game object viewing.&quot;</span>]
    </span><span class="kw">pub </span>floor_plane: <span class="kw">crate</span>::bindings::root::AkFloorPlane,
    <span class="attr">#[doc = <span class="string">&quot;The number of game units in a meter.&quot;</span>]
    </span><span class="kw">pub </span>game_units_to_meters: <span class="kw">crate</span>::bindings::root::AkReal32,
    <span class="attr">#[doc = <span class="string">&quot;The defined client task scheduler that AkSoundEngine will use to schedule internal tasks.&quot;</span>]
    </span><span class="kw">pub </span>task_scheduler_desc: <span class="kw">crate</span>::bindings::root::AkTaskSchedulerDesc,
    <span class="attr">#[doc = <span class="string">&quot;The number of bytes read by the BankReader when new data needs to be loaded from disk during serialization. Increasing this trades memory usage for larger, but fewer, file-read events during bank loading.&quot;</span>]
    </span><span class="kw">pub </span>bank_read_buffer_size: <span class="kw">crate</span>::bindings::root::AkUInt32,
    <span class="attr">#[doc = <span class="string">&quot;Debug setting: Only used when debug_out_of_range_check_enabled is true.  This defines the maximum values samples can have.  Normal audio must be contained within +1/-1.  This limit should be set higher to allow temporary or short excursions out of range.  Default is 16.&quot;</span>]
    </span><span class="kw">pub </span>debug_out_of_range_limit: <span class="kw">crate</span>::bindings::root::AkReal32,
    <span class="attr">#[doc = <span class="string">&quot;Debug setting: Enable checks for out-of-range (and NAN) floats in the processing code.  This incurs a small performance hit, but can be enabled in most scenarios.  Will print error messages in the log if invalid values are found at various point in the pipeline. Contact AK Support with the new error messages for more information.&quot;</span>]
    </span><span class="kw">pub </span>debug_out_of_range_check_enabled: bool,
    <span class="attr">#[doc = <span class="string">&quot;Private information&quot;</span>]
    </span><span class="kw">pub </span>private_stuff: AkInitSettingsPrivate,
}

<span class="attr">#[derive(Debug)]
</span><span class="doccomment">/// High-level IO devices initialization settings.
</span><span class="kw">pub struct </span>AkDeviceSettings {
    <span class="attr">#[doc = <span class="string">&quot;Pointer for I/O memory allocated by user.&quot;</span>]
    #[doc = <span class="string">&quot;Pass NULL if you want memory to be allocated via AK::MemoryMgr::Malign().&quot;</span>]
    #[doc = <span class="string">&quot;If specified, io_memory_size, io_memory_alignment and pool_attributes are ignored.&quot;</span>]
    </span><span class="kw">pub </span>io_memory: AtomicPtr&lt;std::os::raw::c_void&gt;,
    <span class="attr">#[doc = <span class="string">&quot;Size of memory for I/O (for automatic streams). It is passed directly to AK::MemoryMgr::Malign(), after having been rounded down to a multiple of granularity.&quot;</span>]
    </span><span class="kw">pub </span>io_memory_size: u32,
    <span class="attr">#[doc = <span class="string">&quot;I/O memory alignment. It is passed directly to AK::MemoryMgr::Malign().&quot;</span>]
    </span><span class="kw">pub </span>io_memory_alignment: u32,
    <span class="attr">#[doc = <span class="string">&quot;Attributes for I/O memory. Here, specify the allocation type (AkMemType_Device, and so on). It is passed directly to AK::MemoryMgr::Malign().&quot;</span>]
    </span><span class="kw">pub </span>pool_attributes: u32,
    <span class="attr">#[doc = <span class="string">&quot;I/O requests granularity (typical bytes/request).&quot;</span>]
    </span><span class="kw">pub </span>granularity: u32,
    <span class="attr">#[doc = <span class="string">&quot;Scheduler type flags.&quot;</span>]
    </span><span class="kw">pub </span>scheduler_type_flags: u32,
    <span class="attr">#[doc = <span class="string">&quot;Scheduler thread properties.&quot;</span>]
    </span><span class="kw">pub </span>thread_properties: <span class="kw">crate</span>::AkThreadProperties,
    <span class="attr">#[doc = <span class="string">&quot;Targeted automatic stream buffer length (ms). When a stream reaches that buffering, it stops being scheduled for I/O except if the scheduler is idle.&quot;</span>]
    </span><span class="kw">pub </span>target_auto_stm_buffer_length: f32,
    <span class="attr">#[doc = <span class="string">&quot;Maximum number of transfers that can be sent simultaneously to the Low-Level I/O (applies to AK_SCHEDULER_DEFERRED_LINED_UP device only).&quot;</span>]
    </span><span class="kw">pub </span>max_concurrent_io: u32,
    <span class="attr">#[doc = <span class="string">&quot;If true the device attempts to reuse IO buffers that have already been streamed from disk. This is particularly useful when streaming small looping sounds. The drawback is a small CPU hit when allocating memory, and a slightly larger memory footprint in the StreamManager pool.&quot;</span>]
    </span><span class="kw">pub </span>use_stream_cache: bool,
    <span class="attr">#[doc = <span class="string">&quot;Maximum number of bytes that can be \&quot;pinned\&quot; using AK::SoundEngine::PinEventInStreamCache() or AK::IAkStreamMgr::PinFileInCache()&quot;</span>]
    </span><span class="kw">pub </span>max_cache_pinned_bytes: u32,
}

<span class="attr">#[derive(Debug)]
</span><span class="kw">pub struct </span>AkPlatformInitSettings {
    <span class="attr">#[cfg(windows)]
    #[doc = <span class="string">&quot;Handle to the window associated to the audio.&quot;</span>]
    #[doc = <span class="string">&quot;Each game must specify the HWND of the application for device detection purposes.&quot;</span>]
    #[doc = <span class="string">&quot;The value returned by GetDefaultPlatformInitSettings is the foreground HWND at&quot;</span>]
    #[doc = <span class="string">&quot;the moment of the initialization of the sound engine and may not be the correct one for your game.&quot;</span>]
    #[doc = <span class="string">&quot;It is required that each game provides the correct HWND to be used.&quot;</span>]
    </span><span class="kw">pub </span>h_wnd: AtomicPtr&lt;core::ffi::c_void&gt;,
    <span class="attr">#[doc = <span class="string">&quot;Lower engine threading properties&quot;</span>]
    </span><span class="kw">pub </span>thread_lengine: <span class="kw">crate</span>::AkThreadProperties,
    <span class="attr">#[doc = <span class="string">&quot;Ouput thread threading properties&quot;</span>]
    </span><span class="kw">pub </span>thread_output_mgr: <span class="kw">crate</span>::AkThreadProperties,
    <span class="attr">#[doc = <span class="string">&quot;Bank manager threading properties (its default priority is AK_THREAD_PRIORITY_NORMAL)&quot;</span>]
    </span><span class="kw">pub </span>thread_bank_manager: <span class="kw">crate</span>::AkThreadProperties,
    <span class="attr">#[doc = <span class="string">&quot;Monitor threading properties (its default priority is AK_THREAD_PRIORITY_ABOVENORMAL). This parameter is not used in Release build.&quot;</span>]
    </span><span class="kw">pub </span>thread_monitor: <span class="kw">crate</span>::AkThreadProperties,
    <span class="attr">#[doc = <span class="string">&quot;Number of refill buffers in voice buffer. 2 == double-buffered, defaults to 4.&quot;</span>]
    </span><span class="kw">pub </span>num_refills_in_voice: u16,
    <span class="attr">#[doc = <span class="string">&quot;Sampling Rate. Default is 48000 Hz. Use 24000hz for low quality. Any positive reasonable sample rate is supported. However be careful setting a custom value. Using an odd or really low sample rate may result in malfunctionning sound engine.&quot;</span>]
    </span><span class="kw">pub </span>sample_rate: u32,
    <span class="attr">#[cfg(windows)]
    #[doc = <span class="string">&quot;Enables run-time detection of AVX and AVX2 SIMD support in the engine and plug-ins. Disabling this may improve CPU performance by allowing for higher CPU clockspeeds.&quot;</span>]
    </span><span class="kw">pub </span>enable_avx_support: bool,
    <span class="attr">#[cfg(windows)]
    #[doc = <span class="string">&quot;Dictates how many Microsoft Spatial Sound dynamic objects will be reserved by the System sink. On Windows, other running processes will be prevented from reserving these objects. Set to 0 to disable the use of System Audio Objects. Default is 128.&quot;</span>]
    </span><span class="kw">pub </span>max_system_audio_objects: u32,
    <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
    #[doc = <span class="string">&quot;Main audio API to use. Leave to [AkAPI_Default](crate::bindings::root::AkAudioAPILinux::AkAPI_Default) for the default sink (default value).&quot;</span>]
    #[doc = <span class="string">&quot;If a valid audioDeviceShareset plug-in is provided, the AkAudioAPI will be Ignored.&quot;</span>]
    </span><span class="kw">pub </span>audio_api: <span class="kw">crate</span>::bindings::root::AkAudioAPI,
    <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
    #[doc = <span class="string">&quot;Sample type. [AK_FLOAT](crate::bindings::root::AK_FLOAT) for 32 bit float, [AK_INT](crate::bindings::root::AK_INT) for 16 bit signed integer, defaults to [AK_FLOAT](crate::bindings::root::AK_FLOAT).&quot;</span>]
    #[doc = <span class="string">&quot;Supported by [AkAPI_PulseAudio](crate::bindings::root::AkAudioAPILinux::AkAPI_PulseAudio) only.&quot;</span>]
    </span><span class="kw">pub </span>sample_type: u16,
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkInitSettings {
    <span class="doccomment">/// Gets the default values of the platform-independent initialization settings.
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">let </span>inner_settings = <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: <span class="kw">crate</span>::bindings::root::AkInitSettings = std::mem::zeroed();
            SoundEngine::GetDefaultInitSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        };
        <span class="self">Self </span>{
            install_assert_hook: <span class="bool-val">false</span>,
            max_num_paths: inner_settings.uMaxNumPaths,
            command_queue_size: inner_settings.uCommandQueueSize,
            enable_game_sync_preparation: inner_settings.bEnableGameSyncPreparation,
            continuous_playback_look_ahead: inner_settings.uContinuousPlaybackLookAhead,
            num_samples_per_frame: inner_settings.uNumSamplesPerFrame,
            monitor_queue_pool_size: inner_settings.uMonitorQueuePoolSize,
            settings_main_output: inner_settings.settingsMainOutput,
            max_hardware_timeout_ms: inner_settings.uMaxHardwareTimeoutMs,
            use_sound_bank_mgr_thread: inner_settings.bUseSoundBankMgrThread,
            use_lengine_thread: inner_settings.bUseLEngineThread,
            bgm_callback: inner_settings.BGMCallback,
            bgm_callback_cookie: inner_settings.BGMCallbackCookie.into(),
            floor_plane: inner_settings.eFloorPlane,
            game_units_to_meters: inner_settings.fGameUnitsToMeters,
            task_scheduler_desc: inner_settings.taskSchedulerDesc,
            bank_read_buffer_size: inner_settings.uBankReadBufferSize,
            debug_out_of_range_limit: inner_settings.fDebugOutOfRangeLimit,
            debug_out_of_range_check_enabled: inner_settings.bDebugOutOfRangeCheckEnabled,
            private_stuff: AkInitSettingsPrivate::default(),
        }
    }
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkDeviceSettings {
    <span class="doccomment">/// Gets the default values of the platform-independent initialization settings.
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">let </span>inner_settings = <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: <span class="kw">crate</span>::bindings::root::AkDeviceSettings = std::mem::zeroed();
            StreamMgr::GetDefaultDeviceSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        };
        <span class="self">Self </span>{
            io_memory: inner_settings.pIOMemory.into(),
            io_memory_size: inner_settings.uIOMemorySize,
            io_memory_alignment: inner_settings.uIOMemoryAlignment,
            pool_attributes: inner_settings.ePoolAttributes,
            granularity: inner_settings.uGranularity,
            scheduler_type_flags: inner_settings.uSchedulerTypeFlags,
            thread_properties: inner_settings.threadProperties,
            target_auto_stm_buffer_length: inner_settings.fTargetAutoStmBufferLength,
            max_concurrent_io: inner_settings.uMaxConcurrentIO,
            use_stream_cache: inner_settings.bUseStreamCache,
            max_cache_pinned_bytes: inner_settings.uMaxCachePinnedBytes,
        }
    }
}

<span class="kw">impl </span>Default <span class="kw">for </span>AkPlatformInitSettings {
    <span class="doccomment">/// Gets the default values of the platform-specific initialization settings.
    ///
    /// *Windows Specific*:
    ///
    /// &gt; When initializing for Windows platform, the HWND value returned in the
    /// &gt; AkPlatformInitSettings structure is the foreground HWND at the moment of the
    /// &gt; initialization of the sound engine and may not be the correct one for your need.
    /// &gt;
    /// &gt; Each game must specify the HWND that will be passed to DirectSound initialization.
    /// &gt;
    /// &gt; It is required that each game provides the correct HWND to be used or it could cause
    /// &gt; one of the following problem:
    /// &gt;&gt; - Random Sound engine initialization failure.
    /// &gt;&gt; - Audio focus to be located on the wrong window.
    ///
    /// *Warning* This function is not thread-safe.
    ///
    /// *See also*
    /// &gt; - [sound_engine::init](crate::sound_engine::init)
    /// &gt; - [AkInitSettings::default]
    </span><span class="kw">fn </span>default() -&gt; <span class="self">Self </span>{
        <span class="kw">let </span>inner_settings = <span class="kw">unsafe </span>{
            <span class="kw">let </span><span class="kw-2">mut </span>ss: <span class="kw">crate</span>::bindings::root::AkPlatformInitSettings = std::mem::zeroed();
            SoundEngine::GetDefaultPlatformInitSettings(<span class="kw-2">&amp;mut </span>ss);
            ss
        };
        <span class="self">Self </span>{
            <span class="attr">#[cfg(windows)]
            </span>h_wnd: (inner_settings.hWnd <span class="kw">as </span><span class="kw-2">*mut </span>core::ffi::c_void).into(),
            thread_lengine: inner_settings.threadLEngine,
            thread_output_mgr: inner_settings.threadOutputMgr,
            thread_bank_manager: inner_settings.threadBankManager,
            thread_monitor: inner_settings.threadMonitor,
            num_refills_in_voice: inner_settings.uNumRefillsInVoice,
            sample_rate: inner_settings.uSampleRate,
            <span class="attr">#[cfg(windows)]
            </span>enable_avx_support: inner_settings.bEnableAvxSupport,
            <span class="attr">#[cfg(windows)]
            </span>max_system_audio_objects: inner_settings.uMaxSystemAudioObjects,
            <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
            </span>audio_api: inner_settings.eAudioAPI,
            <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
            </span>sample_type: inner_settings.sampleType,
        }
    }
}

<span class="kw">impl </span>AkInitSettings {
    <span class="doccomment">/// When using DLLs for plugins, specify their path. Leave NULL if DLLs are in the same folder as the game executable.
    ///
    /// Note that on Windows, if `path` has spaces, the DLLs won&#39;t be discovered properly.
    </span><span class="kw">pub fn </span>with_plugin_dll_path&lt;T: AsRef&lt;str&gt;&gt;(<span class="kw-2">mut </span><span class="self">self</span>, path: T) -&gt; <span class="self">Self </span>{
        <span class="self">self</span>.private_stuff.plugin_dll_path = to_os_char(path.as_ref());
        <span class="self">self
    </span>}

    <span class="kw">unsafe extern </span><span class="string">&quot;C&quot; </span><span class="kw">fn </span>ak_assert_hook(
        expression: <span class="kw-2">*const </span>std::os::raw::c_char,
        filename: <span class="kw-2">*const </span>std::os::raw::c_char,
        line_nb: std::os::raw::c_int,
    ) {
        <span class="kw">use </span>std::ffi::CStr;

        <span class="kw">let </span>expression = <span class="kw">if </span>expression.is_null() {
            <span class="string">&quot;&lt;no_expr&gt;&quot;</span>.to_string()
        } <span class="kw">else </span>{
            <span class="comment">// Safety
            // in_pszExpression will be valid until to_string(), which will copy the bytes from
            // in_pszExpression onto the Rust-managed heap
            </span>CStr::from_ptr(expression).to_str().unwrap().to_string()
        };
        <span class="kw">let </span>filename = <span class="kw">if </span>filename.is_null() {
            <span class="string">&quot;&lt;no_file&gt;&quot;</span>.to_string()
        } <span class="kw">else </span>{
            <span class="comment">// Safety
            // in_pszFileName will be valid until to_string(), which will copy the bytes from
            // in_pszFileName onto the Rust-managed heap
            </span>CStr::from_ptr(filename).to_str().unwrap().to_string()
        };

        <span class="macro">error!</span>(<span class="string">&quot;AK_ASSERT {}:{} on {}&quot;</span>, filename, line_nb, expression);
    }

    <span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn </span>as_ak(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; <span class="kw">crate</span>::bindings::root::AkInitSettings {
        <span class="kw">crate</span>::bindings::root::AkInitSettings {
            pfnAssertHook: <span class="kw">if </span><span class="self">self</span>.install_assert_hook {
                <span class="prelude-val">Some</span>(<span class="self">Self</span>::ak_assert_hook)
            } <span class="kw">else </span>{
                <span class="prelude-val">None
            </span>},
            uMaxNumPaths: <span class="self">self</span>.max_num_paths,
            uCommandQueueSize: <span class="self">self</span>.command_queue_size,
            bEnableGameSyncPreparation: <span class="self">self</span>.enable_game_sync_preparation,
            uContinuousPlaybackLookAhead: <span class="self">self</span>.continuous_playback_look_ahead,
            uNumSamplesPerFrame: <span class="self">self</span>.num_samples_per_frame,
            uMonitorQueuePoolSize: <span class="self">self</span>.monitor_queue_pool_size,
            settingsMainOutput: <span class="self">self</span>.settings_main_output,
            uMaxHardwareTimeoutMs: <span class="self">self</span>.max_hardware_timeout_ms,
            bUseSoundBankMgrThread: <span class="self">self</span>.use_sound_bank_mgr_thread,
            bUseLEngineThread: <span class="self">self</span>.use_lengine_thread,
            BGMCallback: <span class="self">self</span>.bgm_callback,
            BGMCallbackCookie: <span class="self">self</span>.bgm_callback_cookie.load(Ordering::SeqCst),
            szPluginDLLPath: <span class="self">self</span>.private_stuff.plugin_dll_path.as_mut_ptr(),
            eFloorPlane: <span class="self">self</span>.floor_plane,
            fGameUnitsToMeters: <span class="self">self</span>.game_units_to_meters,
            taskSchedulerDesc: <span class="self">self</span>.task_scheduler_desc,
            uBankReadBufferSize: <span class="self">self</span>.bank_read_buffer_size,
            fDebugOutOfRangeLimit: <span class="self">self</span>.debug_out_of_range_limit,
            bDebugOutOfRangeCheckEnabled: <span class="self">self</span>.debug_out_of_range_check_enabled,
        }
    }
}

<span class="kw">impl </span>AkDeviceSettings {
    <span class="doccomment">/// Gets the default values of the platform-independent initialization settings.
    </span><span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn </span>as_ak(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; <span class="kw">crate</span>::bindings::root::AkDeviceSettings {
        <span class="kw">crate</span>::bindings::root::AkDeviceSettings {
            pIOMemory: <span class="self">self</span>.io_memory.load(Ordering::SeqCst),
            uIOMemorySize: <span class="self">self</span>.io_memory_size,
            uIOMemoryAlignment: <span class="self">self</span>.io_memory_alignment,
            ePoolAttributes: <span class="self">self</span>.pool_attributes,
            uGranularity: <span class="self">self</span>.granularity,
            uSchedulerTypeFlags: <span class="self">self</span>.scheduler_type_flags,
            threadProperties: <span class="self">self</span>.thread_properties,
            fTargetAutoStmBufferLength: <span class="self">self</span>.target_auto_stm_buffer_length,
            uMaxConcurrentIO: <span class="self">self</span>.max_concurrent_io,
            bUseStreamCache: <span class="self">self</span>.use_stream_cache,
            uMaxCachePinnedBytes: <span class="self">self</span>.max_cache_pinned_bytes,
        }
    }
}

<span class="kw">impl </span>AkPlatformInitSettings {
    <span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn </span>as_ak(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; <span class="kw">crate</span>::bindings::root::AkPlatformInitSettings {
        <span class="kw">crate</span>::bindings::root::AkPlatformInitSettings {
            <span class="attr">#[cfg(windows)]
            </span>hWnd: <span class="self">self</span>.h_wnd.load(Ordering::SeqCst) <span class="kw">as </span><span class="kw-2">*mut </span><span class="kw">crate</span>::bindings::root::HWND__,
            threadLEngine: <span class="self">self</span>.thread_lengine,
            threadOutputMgr: <span class="self">self</span>.thread_output_mgr,
            threadBankManager: <span class="self">self</span>.thread_bank_manager,
            threadMonitor: <span class="self">self</span>.thread_monitor,
            uNumRefillsInVoice: <span class="self">self</span>.num_refills_in_voice,
            uSampleRate: <span class="self">self</span>.sample_rate,
            <span class="attr">#[cfg(windows)]
            </span>bEnableAvxSupport: <span class="self">self</span>.enable_avx_support,
            <span class="attr">#[cfg(windows)]
            </span>uMaxSystemAudioObjects: <span class="self">self</span>.max_system_audio_objects,
            <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
            </span>eAudioAPI: <span class="self">self</span>.audio_api,
            <span class="attr">#[cfg(target_os = <span class="string">&quot;linux&quot;</span>)]
            </span>sampleType: <span class="self">self</span>.sample_type,
        }
    }
}
</code></pre></div>
</section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rrise" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (42325c525 2022-11-11)" data-search-js="search-39ee4160c7dc16c9.js" data-settings-js="settings-3a0b9947ba1bd99a.js" data-settings-css="settings-a66f7524084a489a.css" ></div></body></html>